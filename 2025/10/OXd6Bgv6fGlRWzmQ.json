{
  "active": false,
  "connections": {
    "Error Trigger": {
      "main": [
        [
          {
            "node": "Slack",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "createdAt": "2025-10-22T10:36:38.151Z",
  "id": "OXd6Bgv6fGlRWzmQ",
  "meta": {
    "templateCredsSetupCompleted": true
  },
  "name": "FailureWorkflow",
  "nodes": [
    {
      "parameters": {},
      "type": "n8n-nodes-base.errorTrigger",
      "typeVersion": 1,
      "position": [
        -1060,
        -340
      ],
      "id": "d0322351-8d78-4264-a810-6711f6fd8569",
      "name": "Error Trigger"
    },
    {
      "parameters": {
        "select": "channel",
        "channelId": {
          "__rl": true,
          "value": "C09PPD7SXNF",
          "mode": "id"
        },
        "text": "=Failed n8n Workflow Url:  {{ $json.execution.url }}",
        "otherOptions": {}
      },
      "type": "n8n-nodes-base.slack",
      "typeVersion": 2.3,
      "position": [
        -840,
        -340
      ],
      "id": "3ab67d67-3e44-4018-b96d-e08172ee7dd0",
      "name": "Slack",
      "webhookId": "458d720b-7b6e-430d-ab25-680d12a21c48",
      "credentials": {
        "slackApi": {
          "id": "D94E3ThVALiU9SV5",
          "name": "Slack account 2"
        }
      }
    }
  ],
  "pinData": {
    "Error Trigger": [
      {
        "json": {
          "execution": {
            "id": "40786",
            "url": "https://n8n-649845453193.us-central1.run.app/workflow/fxfgvzK5f1vHRgf3/executions/40786",
            "error": {
              "level": "warning",
              "tags": {},
              "context": {},
              "functionality": "regular",
              "name": "NodeOperationError",
              "timestamp": 1761561367851,
              "node": {
                "parameters": {
                  "notice": "",
                  "schemaType": "manual",
                  "inputSchema": "{\n    \"type\": \"object\",\n    \"properties\": {\n        \"type\": {\n            \"type\": \"string\",\n            \"description\": \"The type of deal detected in the document. Use 'Producer' when the deal involves contributions to the master recording as a producer, instrumentalist, or session musician, even if they are not a featured or side artist. Use 'Mixer' when the deal is for mixing work. Use 'Featured Artist' only when the agreement covers a vocal or prominent performance that is credited as a featured or side artist in the release's public-facing metadata.\",\n            \"enum\": [\n                \"Producer\",\n                \"Mixer\",\n                \"Featured Artist\"\n            ]\n        },\n        \"person_name\": {\n            \"type\": \"string\",\n            \"description\": \"Name of the producer, mixer, or featured artist (not main artist) providing services in the document, extracted by running the tool:PersonRetriever with name as query identified from the Deal Document.  A 'person' in this schema refers strictly to a human individual involved in the creation or production of music. This is not the same as an Artist. If the document names someone providing services that name must be passed to tool:PersonRetriever to get the correct match from the database.\"\n        },\n\"person_performer_name\": {\n            \"type\": [\"string\", null],\n            \"description\": \"Performer name of the producer, mixer, or featured artist (not mainartist) extracted by running the tool:PersonRetriever with name as query identified from the Deal Document. A 'person' in this schema refers strictly to a human individual involved in the creation or production of music. This may be the same as the legal name, or different. If the document names someone providing services that name must be passed to tool:PersonRetriever to get the correct match from the database.\"\n        },\n        \"person_number\": {\n            \"type\": [\"string\", null],\n            \"description\": \"number extracted from tool:PersonRetriever payload using the person name (e.g., producer, mixer, contributor) as the query. Used to uniquely identify the Person in the database. Do not set if there is no person found / no matches.\"\n        },\n        \"artist_name\": {\n            \"type\": [\"string\",\n              null],\n            \"description\": \"Name of the performing or releasing musical entity associated with the master recording in the deal document. In producer or mixer deals, this refers to the main artist or group for whom the production or mixing services are being provided. An 'Artist' is the credited performer or act (e.g., solo artist or band) and not the individual producer or mixer. For example, if a producer agreement is for work on a song by 'Bella Poarch', then 'Bella Poarch' is the artist_name. If the artist entity cannot be found in the ArtistRetriever, set this field anyway to the first query.\"\n          \n        },\n        \"artist_number\": {\n            \"type\": [\"string\", null],\n            \"description\": \"number extracted from tool:ArtistRetriever payload using the artist name as query, only set if there is an exact name match. Used to uniquely identify the Artist in the system. If the artist entity cannot be found in the ArtistRetrieve, set this field to null.\"\n        },\n        \"work_for_hire\": {\n            \"type\": \"boolean\",\n            \"description\": \"Indicates whether the deal is a work-for-hire agreement as identified in the Deal Document\",\n            \"default\": true\n        },\n        \"active\": {\n            \"type\": [\n                \"boolean\",\n                null\n            ],\n            \"description\": \"Indicates whether the deal is currently active, as identified in the Deal Document\"\n        },\n        \"status\": {\n            \"type\": \"string\",\n            \"description\": \"Status of the deal as identified in the Deal Document whether both parties have signed or not. If both parties have signed, mark as fully executed. If the counterparty (whoever is not the client), mark as 'Counterparty Signature'. If the client signature is missing, mark as 'Client signature\",\n            \"enum\": [\n                \"Needs Review\",\n                \"Counterparty Action\",\n                \"Client Signature\",\n                \"Counterparty Signature\",\n                \"Fully Executed\",\n                \"Terminated\"\n            ]\n        },\n        \"status_updated_at\": {\n            \"type\": \"string\",\n            \"format\": \"date-time\",\n            \"description\": \"Timestamp of the most recent status update from the Deal Document\"\n        },\n        \"payment_status\": {\n            \"type\": \"string\",\n            \"description\": \"Payment status as extracted from the Deal Document\",\n            \"enum\": [\n                \"Paid\",\n                \"Unpaid\"\n            ]\n        },\n        \"fee_amount\": {\n            \"type\": \"number\",\n            \"description\": \"Fee amount in the specified currency as extracted from the Deal Document\"\n        },\n        \"fee_currency\": {\n            \"type\": \"string\",\n            \"description\": \"Currency of the fee as extracted from the Deal Document\",\n            \"enum\": [\n                \"USD\",\n                \"EUR\",\n                \"GBP\",\n                \"JPY\",\n                \"AUD\",\n                \"CAD\"\n            ]\n        },\n        \"fee_schedule\": {\n            \"type\": \"string\",\n            \"description\": \"Payment schedule type as extracted from the Deal Document\",\n            \"enum\": [\n                \"100% Up Front\",\n                \"50% Up Front, 50% On Delivery\",\n                \"100% On Delivery\"\n            ]\n        },\n        \"kill_fee_currency\": {\n            \"type\": \"string\",\n            \"description\": \"Currency of the kill fee as extracted from the Deal Document\",\n            \"enum\": [\n                \"USD\",\n                \"EUR\",\n                \"GBP\",\n                \"JPY\",\n                \"AUD\",\n                \"CAD\"\n            ]\n        },\n        \"kill_fee_amount\": {\n            \"type\": \"number\",\n            \"description\": \"Kill fee amount in the specified currency as extracted from the Deal Document\"\n        },\n        \"percent_recoupable\": {\n          \"type\": [\"number\", null],\n          \"minimum\": 0.0,\n          \"maximum\": 1.0,\n          \"description\": \"A decimal number between 0 and 1 representing the percent recoupable\",\n          \"format\": \"float\",\n          \"multipleOf\": 0.0001\n        },\n        \"executed_contract\": {\n            \"type\": \"string\",\n            \"description\": \"Identifier or key for the executed contract file\"\n        },\n        \"execution_date\": {\n            \"type\": \"string\",\n            \"format\": \"date\",\n            \"description\": \"Date the agreement was executed\"\n        },\n        \"priority\": {\n            \"type\": \"integer\",\n            \"description\": \"Priority of the deal for processing or tracking\",\n            \"default\": 1\n        },\n        \"notes\": {\n            \"type\": [\n                \"string\",\n                null\n            ],\n            \"description\": \"Any optional notes related to the deal\"\n        },\n        \"original_file_name\": {\n            \"type\": \"string\",\n            \"description\": \"Assign an appropriate name based on the content of the deal document(including the dealing parties) without extenstions i.e .pdf/.doc etc\"\n        },\n        \"start_date\": {\n            \"type\": \"string\",\n            \"format\": \"date\",\n            \"description\": \"Start date of the agreement\"\n        },\n        \"agreements\": {\n            \"type\": \"array\",\n            \"description\": \"A list of individual master agreements extracted from the deal document. Each item corresponds to one master recording listed in the Schedule 1 or any referenced list of masters/compositions. If the document references multiple masters, a separate agreement object should be created for each. Agreements define the deal terms between a contributor (e.g., producer, mixer, featured artist) and the main artist or label. Do not include the main artist in this listâ€”only named individuals providing creative or technical services. Include bonus field if and only if bonus payouts are explicitly and unambiguously mentioned in the document. Do not infer or fabricate bonus terms. Omit entirely (set to null) if no clear bonus clause is found.\",\n            \"items\": {\n                \"type\": \"object\",\n                \"properties\": {\n                    \"person_name\": {\n                        \"type\": \"string\",\n                        \"description\": \"This MUST be the same as the master deal. Name of the producer, mixer, or featured artist (not main artist) providing services in the document, in the main schema, extracted by running the tool:PersonRetriever with name as query identified from the Deal Document. A 'person' in this schema refers strictly to a human individual involved in the creation or production of music. This is not the same as an Artist. If the document names someone providing services that name must be passed to tool:PersonRetriever to get the correct match from the database.\"\n                    },\n\n                  \n                    \"person_number\": {\n                        \"type\": [\"string\", null],\n                        \"description\": \"number extracted from tool:PersonRetriever payload using. Used to uniquely identify the Person in the database. Do not set if there is no person found / no matches.\"\n                    },\n                 \"master_name\": {\n  \"type\": \"string\",\n  \"description\": \"The official name of the master recording as it appears in the deal document. Look for track titles or song names even if they appear only once, and even if the language is subtle (e.g., 'the song entitled...', 'Titles:', 'Track: XYZ', 'titled', 'referred to as', or 'commonly known as'). Also refer to the file name itself.\"\n                 },\n\n                  \"type\" :{\n                    \"type\": [\"string\", null],\n                    \"description\": \"Describes the type of master agreement (past, active, or upstream)\",\n                    \"enum\": [\"Past\", \"Active\", \"Upstream\"]\n                  },\n                  \"master_version_subtitle\": {\n\"type\": [\"string\", null],\n\"description\": \"The specific version subtitle of the master recording (e.g., 'Acoustic Version', 'Remix', 'Live Version') as it appears in the deal document. This field is used to distinguish alternate versions of the same master name. If there is no version subtitle for the associated master, set this field to null.\"\n},\n\n           \"master_number\": {\n                        \"type\": [\"string\", null],\n                        \"description\": \"DO NOT set this if we do not find a exactly matching master name from payload of MasterRetriever tool. Search and find master_number from tool:MasterLookup payload if master_name identified from document matches with that of the MasterRetriever payload. If there is no exact match in MastersLookup then set field to null.\"\n                    },\n                    \"status\": {\n                        \"type\": \"string\",\n                        \"enum\": [\n                            \"Credit Only\",\n                            \"Needs Drafting\",\n                            \"Awaiting Feedback\",\n                            \"In Review\",\n                            \"Executed\"\n                        ]\n                    },\n                    \"effective_date\": {\n                        \"type\": [\n                            \"string\",\n                            null\n                        ],\n                        \"format\": \"date\",\n                        \"description\": \"Effective date of the agreement, if applicable.\"\n                    },\n                    \"master_royalty\": {\n                         \"type\": [\"number\", null],\n      \"minimum\": 0.0,\n      \"maximum\": 1.0,\n      \"description\": \"A decimal number between 0 and 1 representing the royalty amount\",\n      \"format\": \"float\",\n      \"multipleOf\": 0.0001\n                    },\n                    \"master_royalty_type\": {\n                        \"type\": \"string\",\n                        \"enum\": [\n                            \"None\",\n                            \"PPD\",\n                            \"Net Profit\",\n                            \"Net Receipts Equivalent\"\n                        ],\n                        \"description\": \"Type of royalty calculation for the master agreement.\"\n                    },\n                    \"fee\": {\n                        \"type\": \"number\",\n                        \"description\": \"Fee amount associated with the master agreement.\"\n                    },\n                    \"upstream_royalty\": {\n                         \"type\": [\"number\", \"null\"],\n      \"minimum\": 0.0,\n      \"maximum\": 1.0,\n      \"description\": \"A decimal number between 0 and 1 representing the upstream royalty\",\n      \"format\": \"float\",\n      \"multipleOf\": 0.0001\n                    },\n                    \"upstream_royalty_type\": {\n                        \"type\": \"string\",\n                        \"enum\": [\n                            \"None\",\n                            \"PPD\",\n                            \"Net Profit\",\n                            \"Net Receipts Equivalent\"\n                        ],\n                        \"description\": \"Type of royalty calculation for the upstream agreement.\"\n                    },\n                    \"upstream_fee\": {\n                        \"type\": \"number\",\n                        \"description\": \"Fee amount associated with the upstream agreement.\"\n                    },\n                    \"upstream_fee_currency\": {\n                        \"type\": \"string\",\n                        \"enum\": [\n                            \"USD\",\n                            \"EUR\",\n                            \"GBP\",\n                            \"JPY\",\n                            \"AUD\",\n                            \"CAD\"\n                        ],\n                        \"description\": \"Currency of the fee amount.\"\n                    },\n                    \"neighboring_rights_royalty\": {\n                        \"type\": \"number\",\n                        \"description\": \"Royalty percentage associated with the neighboring rights agreement.\"\n                    },\n                 \"sx_percentage\": {\n  \"type\": [\"number\", null],\n  \"description\": \"Extract the numeric percentage value of artist royalty share being assigned to the LOD (Letter of Direction) recipient for this track on SoundExchange. This is often found in Schedule 1 or summary tables and may be phrased as 'percentage of artist royalties' or 'share to LOD recipient'. Represent this as a decimal between 0.0 and 1.0 (e.g., 5.5% = 0.0555). Do not extract values stated in 'points' or as fractions. If no percentage is clearly stated, set this to null.\",\n  \"minimum\": 0.0,\n  \"maximum\": 1.0,\n \"multipleOf\": 0.0001\n},\n\n\n                    \"start_date\": {\n                        \"type\": [\n                            \"string\",\n                            null\n                        ],\n                        \"format\": \"date\",\n                        \"description\": \"Start date of the master agreement.\"\n                    },\n\n                  \"bonus\": {\n  \"type\": [\"object\", null],\n    \"description\": \"Include bonus field if and only if bonus payouts are explicitly and unambiguously mentioned in the document. Do not infer or fabricate bonus terms. Omit entirely (set to null) if no clear bonus clause is found. Details of a conditional bonus payout to a contributor, based on performance or revenue milestones. This object should be created based on the first clearly defined bonus clause in the agreement, such as thresholds tied to streaming counts or gross earnings. If multiple bonuses are described, include only the first one here and note others in the 'description' field. \",\n  \"properties\": {\n    \"threshold_type\": {\n      \"type\": \"string\",\n      \"enum\": [\n        \"Streams\",\n           \"Earnings\",\n    \"Other\"\n      ],\n      \"description\": \"The type of milestone that must be reached to trigger a bonus payout. Can be one of: 'streams' (e.g., number of Spotify or Apple Music streams), 'earnings' (e.g., gross revenue from the master), or 'other' (a custom or manual threshold defined in the deal). Do not set if bonus is not mentioned in document.\"\n      \n    },\n    \"threshold_amount\": {\n      \"type\": [\"number\", \"null\"],\n      \"description\": \"The number required for a milestone to be reached to trigger a bonus payout (e.g number of streams, earnings).\"\n    },\n    \"threshold_currency\": {\n      \"type\": [\"string\", \"null\"],\n      \"description\": \"Currency of the threshold earnings amount if threshold type is earnings for the bonus\",\n            \"enum\": [\n                \"USD\",\n                \"EUR\",\n                \"GBP\",\n                \"JPY\",\n                \"AUD\",\n                \"CAD\"\n            ]\n    },\n    \"bonus_fee\": {\n      \"type\": [\"number\", \"null\"],\n      \"description\": \"The bonus amount granted to the producer / mixer if threshold is met.\"\n    },\n    \"bonus_currency\": {\n      \"type\": [\"string\", \"null\"],\n       \"description\": \"Currency of the threshold earnings amount if threshold type is earnings for the bonus\",\n        \"enum\": [\n                \"USD\",\n                \"EUR\",\n                \"GBP\",\n                \"JPY\",\n                \"AUD\",\n                \"CAD\"\n            ]\n    },\n    \"description\": {\n      \"type\": [\"string\"],\n      \"description\": \"Include any other additional bonus information (higher bonuses and other payouts if there are more bonuses mentioned)\"\n    },\n    \"achieved\": {\n      \"type\": \"boolean\",\n      \"default\": false\n    }\n  },\n  \"required\": [\"threshold_type\", \"description\", \"bonus_fee\"]\n},\n                    \"credits\": {\n                        \"type\": \"array\",\n                        \"description\": \"List of credits associated with the master agreement\",\n                        \"items\": {\n                            \"type\": \"object\",\n                            \"properties\": {\n                                \"credit\": {\n                                    \"type\": \"string\",\n                                    \"enum\": [\n                                        \"Mixer\",\n                                        \"Producer\",\n                                        \"Mastering Engineer\",\n                                        \"Dolby Atmos Mixing Engineer\",\n                                        \"Dolby Atmos Mastering Engineer\",\n                                        \"Additional Production\",\n                                        \"Musician\"\n                                    ]\n                                },\n                                \"instrument\": {\n                                    \"type\": [\n                                        \"string\",\n                                        null\n                                    ],\n                              \"description\": \"If credit = musician, retrieve the name of instrument by calling the tool tool:InstrumentRetriever exactly once for that instrument name. The input to the tool:InstrumentRetriever is instrument name mentioned for the musician in the deal document. If the response is empty, or there is no insrument mentioned in the document, do not call the tol:InstrumentRetriever and set instrument value to null.\"\n                                }\n                            },\n                            \"required\": [\n                                \"credit\"\n                            ]\n                        }\n                    }\n                },\n                \"required\": [\n                    \"person_name\",\n                    \"master_name\"\n                ]\n            }\n        }\n    }, \n    \"required\": [\n        \"type\",\n        \"person_legal_name\",\n        \"artist_name\",\n        \"work_for_hire\",\n        \"active\",\n        \"status\",\n        \"status_updated_at\",\n        \"original_file_name\",\n        \"start_date\",\n        \"agreements\"\n    ]\n}\n"
                },
                "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
                "typeVersion": 1.2,
                "position": [
                  -1780,
                  1140
                ],
                "id": "ff8a940e-2387-411f-b9c1-350ec674205e",
                "name": "ParserSchema"
              },
              "messages": [],
              "description": "To continue the execution when this happens, change the 'On Error' parameter in the root node's settings",
              "message": "Model output doesn't fit required format",
              "stack": "NodeOperationError: Model output doesn't fit required format\n    at N8nStructuredOutputParser.parse (/usr/local/lib/node_modules/n8n/node_modules/@n8n/n8n-nodes-langchain/dist/utils/output_parsers/N8nStructuredOutputParser.js:64:25)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at N8nOutputFixingParser.parse (/usr/local/lib/node_modules/n8n/node_modules/@n8n/n8n-nodes-langchain/dist/utils/output_parsers/N8nOutputFixingParser.js:73:24)\n    at RunnableLambda.func (/usr/local/lib/node_modules/n8n/node_modules/@n8n/n8n-nodes-langchain/dist/nodes/agents/Agent/agents/ToolsAgent/execute.js:126:28)\n    at /usr/local/lib/node_modules/n8n/node_modules/@langchain/core/dist/runnables/base.cjs:1749:33"
            },
            "lastNodeExecuted": "Agent",
            "mode": "integrated"
          },
          "workflow": {
            "id": "fxfgvzK5f1vHRgf3",
            "name": "Master"
          }
        }
      }
    ]
  },
  "repo_name": "hub-n8n",
  "repo_owner": "ck-bit",
  "repo_path": "",
  "settings": {
    "executionOrder": "v1",
    "callerPolicy": "workflowsFromSameOwner"
  },
  "staticData": null,
  "tags": [],
  "triggerCount": 0,
  "updatedAt": "2025-11-03T04:19:51.658Z",
  "versionId": "16f72d75-2966-4bb4-be32-0de4ead69716"
}